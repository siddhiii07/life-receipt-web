<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Life Receipts Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;500&family=Sacramento&display=swap"
        rel="stylesheet" />
    <style>
        body {
            font-family: "Oswald", sans-serif;
        }
    </style>
</head>

<body class="bg-gradient-to-r from-sky-100 to-green-100 min-h-screen">
    <!-- Navbar (from data.html) -->
    <div id="navbar"></div>

    <!-- Activity Form Section (from data.html, but connected to JS) -->
    <div class="bg-white p-9 rounded-2xl shadow-lg w-full max-w-4xl my-10 mx-auto ">
        <div class="flex flex-row items-center mb-5">
            <img class="w-40 h-40" src="../assets/rating.png" alt="rating">
            <h1 class="text-4xl font-bold text-center mx-4 text-gray-800">üåø Add Daily Activity</h1>

        </div>
        <form id="activityForm" class="space-y-6">
            <div>
                <label class="block text-gray-700 mb-2">Activity Name</label>
                <input id="activityName" type="text" placeholder="e.g., Reading, Gym, Netflix"
                    class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-green-400 focus:outline-none placeholder-gray-400"
                    required>
            </div>

            <div>
                <label class="block text-gray-700 mb-2">Category / Type</label>
                <input id="category" list="categories" placeholder="Select or type your own"
                    class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-sky-400 focus:outline-none placeholder-gray-400"
                    required>
                <datalist id="categories">
                    <option value="Work">
                    <option value="Study">
                    <option value="Leisure">
                    <option value="Fitness">
                    <option value="Sleep">
                    <option value="Personal">
                </datalist>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-gray-700 mb-2">Start Time</label>
                    <input id="startTime" type="time"
                        class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-green-400 focus:outline-none"
                        required>
                </div>
                <div>
                    <label class="block text-gray-700 mb-2">End Time</label>
                    <input id="endTime" type="time"
                        class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-green-400 focus:outline-none"
                        required>
                </div>
            </div>

            <div>
                <label class="block text-gray-700 mb-2">Date</label>
                <input id="date" type="date"
                    class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-sky-400 focus:outline-none"
                    required>
            </div>

            <div>
                <label class="block text-gray-700 mb-2">Mood</label>
                <input id="mood" list="moods" placeholder="Select or type your mood"
                    class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-yellow-400 focus:outline-none placeholder-gray-400">
                <datalist id="moods">
                    <option value="Happy">
                    <option value="Neutral">
                    <option value="Tired">
                    <option value="Sad">
                    <option value="Energetic">
                </datalist>
            </div>

            <div>
                <label class="block text-gray-700 mb-2">Goal Tag</label>
                <input id="goal" list="goals" placeholder="Select or type a goal"
                    class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-pink-400 focus:outline-none placeholder-gray-400">
                <datalist id="goals">
                    <option value="Study Target">
                    <option value="Health Goal">
                    <option value="Work Project">
                    <option value="Sleep Schedule">
                </datalist>
            </div>

            <div>
                <label class="block text-gray-700 mb-2">Notes (Optional)</label>
                <textarea id="notes" placeholder="Add details like ‚ÄòGroup study‚Äô or ‚ÄòWatched with family‚Äô"
                    class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none placeholder-gray-400"></textarea>
            </div>

            <div class="text-center">
                <button type="button" onclick="addActivity()"
                    class="bg-sky-300 text-gray-800 font-semibold py-2 px-6 rounded-lg hover:bg-green-300 hover:scale-105 transition-transform duration-300">
                    Save Activity
                </button>
            </div>
        </form>
    </div>

    <!-- Search -->
    <section class="max-w-4xl mx-auto mt-6 bg-white p-4 rounded-2xl shadow-lg">
        <input id="searchInput" onkeyup="searchActivities()" type="text" placeholder="Search activities..."
            class="w-full border p-2 rounded-lg" />
    </section>

    <!-- Activity List -->
    <section class="max-w-4xl mx-auto m-6 bg-white p-6 rounded-2xl shadow-xl">
        <h2 class="text-2xl font-bold text-center mb-4 text-gray-700">Your Logged Activities</h2>
        <ul id="activityList" class="list-none space-y-3"></ul>
        <div class="text-center mt-4">
            <button onclick="clearAll()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition">
                Clear All
            </button>
        </div>
    </section>

    <script>
        // Load navbar
        fetch("navbar.html")
            .then(response => response.text())
            .then(data => {
                document.getElementById("navbar").innerHTML = data;
            });

        // Activity handling
        let activities = JSON.parse(localStorage.getItem("activities")) || [];

        function addActivity() {
            const activityName = document.getElementById("activityName").value;
            const category = document.getElementById("category").value;
            const startTime = document.getElementById("startTime").value;
            const endTime = document.getElementById("endTime").value;
            const date = document.getElementById("date").value;
            const mood = document.getElementById("mood").value;
            const goal = document.getElementById("goal").value;
            const notes = document.getElementById("notes").value;

            if (!activityName || !category || !startTime || !endTime || !date) {
                alert("Please fill all required fields!");
                return;
            }

            const activity = {
                id: Date.now(),
                activityName,
                category,
                startTime,
                endTime,
                date,
                mood,
                goal,
                notes,
            };

            activities.push(activity);
            localStorage.setItem("activities", JSON.stringify(activities));
            document.getElementById("activityForm").reset();
            displayActivities();
        }

        function displayActivities(list = activities) {
            const activityList = document.getElementById("activityList");
            activityList.innerHTML = "";

            if (list.length === 0) {
                activityList.innerHTML = `<p class='text-center text-gray-500'>No activities added yet.</p>`;
                return;
            }

            list.forEach((data) => {
                const li = document.createElement("li");
                li.className = "p-4 bg-gray-50 border rounded-lg shadow-sm hover:bg-green-50 transition";
                li.innerHTML = `
          <div class="flex justify-between items-center">
            <div>
              <strong class="text-lg text-gray-800">${data.activityName}</strong> ‚Äî ${data.category}<br>
              <span class="text-gray-600">üïí ${data.startTime} - ${data.endTime} | üìÖ ${data.date}</span><br>
              <span class="text-gray-600">üòÑ ${data.mood || "N/A"} | üéØ ${data.goal || "N/A"}</span><br>
              <span class="text-gray-600">üìù ${data.notes || ""}</span>
            </div>
            <button onclick="deleteActivity(${data.id})"
              class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg text-sm">
              Delete
            </button>
          </div>
        `;
                activityList.appendChild(li);
            });
        }

        function deleteActivity(id) {
            activities = activities.filter((a) => a.id !== id);
            localStorage.setItem("activities", JSON.stringify(activities));
            displayActivities();
        }

        function searchActivities() {
            const searchText = document.getElementById("searchInput").value.toLowerCase();
            const filtered = activities.filter(
                (a) =>
                    a.activityName.toLowerCase().includes(searchText) ||
                    a.category.toLowerCase().includes(searchText) ||
                    (a.mood && a.mood.toLowerCase().includes(searchText))
            );
            displayActivities(filtered);
        }

        function clearAll() {
            if (confirm("Are you sure you want to delete all activities?")) {
                localStorage.removeItem("activities");
                activities = [];
                displayActivities();
            }
        }

        window.onload = displayActivities;
    </script>
</body>

</html>